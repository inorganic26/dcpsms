<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>μ„ μƒλ‹ λ€μ‹λ³΄λ“</title>

  <script>
    (async function() {
      console.log("π§Ή [Teacher V3] μ‚Όμ„± μΈν„°λ„· μΊμ‹ ν•΄κ²° λ¨λ“ μ‘λ™...");
      try {
        if ('serviceWorker' in navigator) {
          const registrations = await navigator.serviceWorker.getRegistrations();
          for (const registration of registrations) await registration.unregister();
        }
        if ('caches' in window) {
          const keys = await caches.keys();
          for (const key of keys) await caches.delete(key);
        }
        
        const KEY = 'pwa_cleanup_done_v3_samsung_fix';
        if (!sessionStorage.getItem(KEY)) {
          sessionStorage.setItem(KEY, 'true');
          const newUrl = window.location.href.split('?')[0] + '?ver=' + new Date().getTime();
          console.log("β΅ [Teacher] κ°•μ  μ£Όμ† μ΄λ™:", newUrl);
          window.location.replace(newUrl);
        }
      } catch (e) {
        console.error("β μ¤λ¥ λ°μƒ:", e);
      }
    })();
  </script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="/src/shared/style.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      },
      svg: {
        fontCache: 'global'
      },
      startup: {
        ready: () => {
          MathJax.startup.defaultReady();
        }
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body class="bg-slate-50">

  <div id="toast-notification" class="fixed top-8 right-8 z-[100] p-4 rounded-lg shadow-lg text-white transform translate-x-[120%] opacity-0" style="transition: opacity 0.3s, transform 0.3s;">
    <p id="toast-message"></p>
  </div>

  <div id="teacher-login-container" class="w-full min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-xs mx-auto p-8 bg-white rounded-xl shadow-md">
      <h1 class="text-3xl font-bold text-slate-800 mb-6 text-center">κµμ‚¬ λ΅κ·ΈμΈ</h1>
      <div class="space-y-4 text-left">
        <div>
          <label for="teacher-name" class="block text-sm font-medium text-slate-700 mb-1">μ΄λ¦„</label>
          <input type="text" id="teacher-name" class="form-input" placeholder="μ΄λ¦„μ„ μ…λ ¥ν•μ„Έμ”">
        </div>
        <div>
          <label for="teacher-password" class="block text-sm font-medium text-slate-700 mb-1">λΉ„λ°€λ²νΈ</label>
          <input type="password" id="teacher-password" class="form-input" placeholder="λΉ„λ°€λ²νΈλ¥Ό μ…λ ¥ν•μ„Έμ”">
        </div>
      </div>
      <button id="teacher-login-btn" class="btn-primary w-full mt-6 py-3">λ΅κ·ΈμΈ</button>
      <a href="/" class="back-to-portal-btn mt-4 block text-center text-sm text-slate-500 hover:underline no-underline">ν¬ν„Έλ΅ λμ•„κ°€κΈ°</a>
    </div>
  </div>

  <div id="teacher-dashboard-container" style="display:none;">
    <div class="container mx-auto max-w-5xl p-4 sm:p-6 md:p-8">
      <a href="/" class="back-to-portal-btn mb-8 inline-block text-sm text-slate-500 hover:text-slate-800 transition no-underline">&larr; ν¬ν„Έλ΅ λμ•„κ°€κΈ°</a>

      <div class="content-card">
        <header class="border-b border-slate-200 pb-6 mb-6">
          <label for="teacher-class-select" class="block text-sm font-medium text-slate-700 mb-2">λ° μ„ νƒ</label>
          <select id="teacher-class-select" class="form-select max-w-sm">
            <option value="">-- λ° λ©λ΅μ„ λ¶λ¬μ¤λ” μ¤‘... --</option>
          </select>
        </header>

        <div id="teacher-main-content" style="display:none;">
          <div id="teacher-navigation-buttons" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div data-view="homework-dashboard" class="teacher-nav-btn dashboard-card">
              <svg class="w-8 h-8 mb-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
              <h3>μ™μ  ν„ν™©</h3>
            </div>
            
            <div data-view="daily-test-mgmt" class="teacher-nav-btn dashboard-card">
              <svg class="w-8 h-8 mb-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
              <h3>μΌμΌ ν…μ¤νΈ κ²°κ³Ό</h3>
            </div>
            
            <div data-view="weekly-test-mgmt" class="teacher-nav-btn dashboard-card">
              <svg class="w-8 h-8 mb-2 text-fuchsia-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
              <h3>μ£Όκ°„ ν…μ¤νΈ κ²°κ³Ό</h3>
            </div>

            <div data-view="learning-status-mgmt" class="teacher-nav-btn dashboard-card">
              <svg class="w-8 h-8 mb-2 text-rose-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path></svg>
              <h3>ν•™μµ ν„ν™©</h3>
            </div>

            <div data-view="lesson-mgmt" class="teacher-nav-btn dashboard-card">
              <svg class="w-8 h-8 mb-2 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
              <h3>ν•™μµ μ„ΈνΈ κ΄€λ¦¬</h3>
            </div>
            <div data-view="qna-video-mgmt" class="teacher-nav-btn dashboard-card">
              <svg class="w-8 h-8 mb-2 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
              <h3>μ§λ¬Έ μμƒ</h3>
            </div>
            <div data-view="class-video-mgmt" class="teacher-nav-btn dashboard-card" style="display:none;">
              <svg class="w-8 h-8 mb-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m9.75 0V9M9 7.5l3-3m0 0 3 3M12 4.5v12.75"></path></svg>
              <h3>μμ—… μμƒ κ΄€λ¦¬</h3>
            </div>
            <div data-view="student-list-mgmt" class="teacher-nav-btn dashboard-card">
              <svg class="w-8 h-8 mb-2 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"></path></svg>
              <h3>ν•™μƒ λ…λ‹¨ κ΄€λ¦¬</h3>
            </div>
            <div data-view="class-mgmt" class="teacher-nav-btn dashboard-card">
              <svg class="w-8 h-8 mb-2 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
              <h3>λ° μ„¤μ •</h3>
            </div>
            <div data-view="report-mgmt" class="teacher-nav-btn dashboard-card">
              <svg class="w-8 h-8 mb-2 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path></svg>
              <h3>μ‹ν— κ²°κ³Ό κ΄€λ¦¬</h3>
            </div>
          </div>

          <main>
            <div id="view-homework-dashboard" class="teacher-view" style="display:none;">
               <button class="back-to-teacher-menu btn btn-secondary btn-sm mb-4">&larr; λ©”λ‰΄λ΅</button>
               <h2 class="text-2xl font-bold text-slate-800 mb-4">μ™μ  ν„ν™©</h2>
               <div id="homework-dashboard-controls" class="flex justify-between items-center mb-4">
                 <select id="teacher-homework-select" class="form-select max-w-sm"><option value="">-- μ™μ  μ„ νƒ --</option></select>
                 <button id="teacher-assign-homework-btn" class="btn btn-primary btn-sm">μƒ μ™μ  μ¶μ </button>
               </div>
               <div id="teacher-homework-management-buttons" class="hidden justify-end gap-2 mb-4">
                 <button id="teacher-edit-homework-btn" class="btn btn-secondary btn-sm">μ™μ  μ •λ³΄ μμ •</button>
                 <button id="teacher-delete-homework-btn" class="btn btn-danger btn-sm">μ™μ  μ‚­μ </button>
               </div>
               <div id="teacher-homework-content" class="hidden">
                 <h3 id="teacher-selected-homework-title" class="text-xl font-bold text-slate-700 mb-4"></h3>
                 <div class="overflow-x-auto relative shadow-md sm:rounded-lg custom-scrollbar">
                   <table class="w-full text-sm text-left text-gray-500">
                     <thead class="bg-slate-100 text-slate-700 sticky top-0 z-10">
                       <tr>
                         <th class="p-3 font-bold">ν•™μƒ μ΄λ¦„</th>
                         <th class="p-3 font-bold">μƒνƒ</th>
                         <th class="p-3 font-bold">μ μ¶μΌ</th>
                         <th class="p-3 font-bold text-center">νμΌ</th>
                       </tr>
                     </thead>
                     <tbody id="teacher-homework-table-body"></tbody>
                   </table>
                 </div>
               </div>
            </div>

            <div id="view-daily-test-mgmt" class="teacher-view" style="display:none;">
                <button class="back-to-teacher-menu btn btn-secondary btn-sm mb-4">&larr; λ©”λ‰΄λ΅</button>
                <header class="mb-6">
                    <h1 class="text-3xl font-bold text-slate-800">μΌμΌ ν…μ¤νΈ κ²°κ³Ό</h1>
                    <p class="text-slate-500 mt-2">λ° ν•™μƒλ“¤μ μΌμΌ ν…μ¤νΈ μ μ λ„μ ν‘λ¥Ό λ‚ μ§λ³„λ΅ ν™•μΈν•©λ‹λ‹¤.</p>
                </header>
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                    <div class="max-w-md mb-6">
                        <label class="block text-sm font-bold text-slate-700 mb-1">κ³Όλ© μ„ νƒ</label>
                        <select id="teacher-daily-test-subject-select" class="form-select">
                            <option value="">-- κ³Όλ©μ„ λ¨Όμ € μ„ νƒν•μ„Έμ” --</option>
                        </select>
                    </div>
                    <div id="teacher-daily-test-result-table" class="overflow-x-auto min-h-[300px]">
                        <p class="text-center text-slate-400 py-10">κ³Όλ©μ„ μ„ νƒν•λ©΄ μ μν‘κ°€ ν‘μ‹λ©λ‹λ‹¤.</p>
                    </div>
                </div>
            </div>

            <div id="view-weekly-test-mgmt" class="teacher-view" style="display:none;">
                <button class="back-to-teacher-menu btn btn-secondary btn-sm mb-4">&larr; λ©”λ‰΄λ΅</button>
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-3xl font-bold text-slate-800">μ£Όκ°„ ν…μ¤νΈ κ΄€λ¦¬</h1>
                    <button id="teacher-add-weekly-test-btn" class="px-4 py-2 bg-purple-600 text-white text-sm font-bold rounded-xl hover:bg-purple-700 transition shadow-sm flex items-center gap-2">
                        <span class="material-icons text-base">add</span> μ„±μ  μ¶”κ°€
                    </button>
                </div>
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                    <div id="teacher-weekly-test-result-table" class="overflow-x-auto min-h-[150px]"></div>
                    <div id="teacher-weekly-test-pagination" class="flex justify-center items-center gap-4 mt-4 hidden">
                        <button id="teacher-weekly-test-prev-btn" class="p-2 bg-slate-100 rounded-lg hover:bg-slate-200">β—€</button>
                        <span id="teacher-weekly-test-page-info" class="text-sm font-bold text-slate-600">1 / 1</span>
                        <button id="teacher-weekly-test-next-btn" class="p-2 bg-slate-100 rounded-lg hover:bg-slate-200">β–¶</button>
                    </div>
                </div>
            </div>

            <div id="view-learning-status-mgmt" class="teacher-view" style="display:none;">
                <button class="back-to-teacher-menu btn btn-secondary btn-sm mb-4">&larr; λ©”λ‰΄λ΅</button>
                <header class="mb-6">
                    <h1 class="text-3xl font-bold text-slate-800">ν•™μµ ν„ν™© μƒμ„Έ</h1>
                    <p class="text-slate-500 mt-2">νΉμ • ν•™μµ μ„ΈνΈμ— λ€ν• ν•™μƒλ³„ μ§„ν–‰ μƒν™©μ„ ν™•μΈν•©λ‹λ‹¤.</p>
                </header>
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-1">1. κ³Όλ© μ„ νƒ</label>
                            <select id="teacher-learning-subject-select" class="form-select">
                                <option value="">-- κ³Όλ© μ„ νƒ --</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-1">2. ν•™μµ μ„ΈνΈ μ„ νƒ</label>
                            <select id="teacher-learning-lesson-select" class="form-select" disabled>
                                <option value="">-- κ³Όλ©μ„ λ¨Όμ € μ„ νƒν•μ„Έμ” --</option>
                            </select>
                        </div>
                    </div>
                    <div id="teacher-learning-result-table" class="overflow-x-auto min-h-[200px]">
                        <p class="text-center text-slate-400 py-10">μ΅°νν•  ν•™μµμ„ μ„ νƒν•΄μ£Όμ„Έμ”.</p>
                    </div>
                </div>
            </div>

            <div id="view-qna-video-mgmt" class="teacher-view" style="display:none;">
               <button class="back-to-teacher-menu btn btn-secondary btn-sm mb-4">&larr; λ©”λ‰΄λ΅</button>
               <h2 class="text-2xl font-bold text-slate-800 border-b pb-4 mb-6">μμ—… μ§λ¬Έ μμƒ κ΄€λ¦¬</h2>
               <div class="space-y-4 max-w-lg mx-auto p-4 border rounded-lg bg-slate-50 mb-8">
                   <div class="grid grid-cols-1 gap-4">
                       <div>
                           <label for="qna-video-date" class="block text-sm font-medium text-slate-600 mb-1">μμ—… λ‚ μ§</label>
                           <input type="date" id="qna-video-date" class="form-input">
                       </div>
                   </div>
                   <div>
                       <label for="qna-video-title" class="block text-sm font-medium text-slate-600 mb-1">μμƒ μ λ©</label>
                       <input type="text" id="qna-video-title" class="form-input" placeholder="μ: 2λ² λ¬Έμ  ν’€μ΄">
                   </div>
                   <div>
                       <label for="qna-video-url" class="block text-sm font-medium text-slate-600 mb-1">μ νλΈ μμƒ URL</label>
                       <input type="url" id="qna-video-url" class="form-input" placeholder="https://youtube.com/watch?v=...">
                   </div>
                   <div class="text-right">
                       <button id="save-qna-video-btn" class="btn-primary">μμƒ μ €μ¥ν•κΈ°</button>
                   </div>
               </div>
               <div class="mt-8 border-t pt-6">
                   <h3 class="text-xl font-semibold text-slate-700 mb-4">μ„ νƒν• λ‚ μ§μ μμƒ λ©λ΅</h3>
                   <div id="qna-videos-list-teacher" class="space-y-3">
                       <p class="text-sm text-slate-500">λ‚ μ§λ¥Ό μ„ νƒν•λ©΄ ν•΄λ‹Ή μμƒ λ©λ΅μ΄ ν‘μ‹λ©λ‹λ‹¤.</p>
                   </div>
               </div>
            </div>

            <div id="view-lesson-mgmt" class="teacher-view" style="display:none;">
               <button class="back-to-teacher-menu btn btn-secondary btn-sm mb-4">&larr; λ©”λ‰΄λ΅</button>
               <div id="lesson-mgmt-controls" class="border-b pb-4 mb-6">
                   <h1 class="text-2xl font-bold text-slate-800">ν•™μµ μ„ΈνΈ κ΄€λ¦¬</h1>
                   <div class="w-full md:w-1/2 mt-4">
                       <label for="teacher-subject-select-mgmt" class="block text-sm font-medium text-slate-700 mb-2">κ³Όλ© μ„ νƒ</label>
                       <select id="teacher-subject-select-mgmt" class="form-select"><option value="">-- κ³Όλ© μ„ νƒ --</option></select>
                   </div>
               </div>
               <div id="teacher-lessons-management-content" class="hidden">
                   <div class="flex justify-end gap-2">
                       <button id="teacher-save-lesson-order-btn" class="btn bg-green-600 text-white hover:bg-green-700 focus:ring-green-500">μμ„ μ €μ¥</button>
                       <button id="teacher-show-new-lesson-modal-btn" class="btn-primary">+ μƒ ν•™μµ μ„ΈνΈ λ§λ“¤κΈ°</button>
                   </div>
                   <div id="teacher-lessons-list-container" class="mt-6"><div id="teacher-lessons-list" class="space-y-4"></div></div>
               </div>
               <p id="teacher-lesson-prompt" class="text-center text-slate-500 py-8">λ¨Όμ € κ³Όλ©μ„ μ„ νƒν•΄μ£Όμ„Έμ”.</p>
            </div>

            <div id="view-student-list-mgmt" class="teacher-view" style="display:none;">
              <button class="back-to-teacher-menu btn btn-secondary btn-sm mb-4">&larr; λ©”λ‰΄λ΅</button>
              <h2 class="text-2xl font-bold text-slate-800 mb-4">ν•™μƒ λ…λ‹¨</h2>
              <div id="teacher-student-list-container" class="border rounded-lg bg-white overflow-y-auto max-h-96 custom-scrollbar">
                <p class="text-sm text-slate-500 p-4">ν•™μƒ λ…λ‹¨μ„ λ¶λ¬μ¤λ” μ¤‘...</p>
              </div>
            </div>

            <div id="view-class-mgmt" class="teacher-view" style="display:none;">
              <button class="back-to-teacher-menu btn btn-secondary btn-sm mb-4">&larr; λ©”λ‰΄λ΅</button>
              <h2 class="text-2xl font-bold text-slate-800 mb-4">λ° μ„¤μ • κ΄€λ¦¬</h2>

              <div id="current-class-info" class="mb-6 p-4 border rounded-lg bg-slate-50" style="display:none;">
                <h3 class="font-semibold text-slate-700 mb-2">ν„μ¬ λ° μ„¤μ • μ •λ³΄</h3>
                <p class="text-sm text-slate-600"><strong>λ° μ ν•:</strong> <span id="current-class-type">-</span></p>
                <div class="mt-2">
                  <p class="text-sm font-medium text-slate-600 mb-1"><strong>μ—°κ²°λ κ³Όλ© λ° κµμ¬:</strong></p>
                  <ul id="current-class-subjects-list" class="list-disc list-inside text-sm text-slate-600 pl-4">
                    <li>μ •λ³΄ λ΅λ”© μ¤‘...</li>
                  </ul>
                </div>
              </div>

              <div class="flex flex-col sm:flex-row gap-4">
                <button id="teacher-edit-class-btn" class="btn-primary">λ° νΉμ„±/κ³Όλ©/κµμ¬ μ„¤μ • λ³€κ²½</button>
                <button id="teacher-manage-subjects-textbooks-btn" class="btn-secondary">κ³Όλ©/κµμ¬ κ΄€λ¦¬ (μ¶”κ°€/μ‚­μ )</button>
              </div>
            </div>

            <div id="view-class-video-mgmt" class="teacher-view" style="display:none;">
               <button class="back-to-teacher-menu btn btn-secondary btn-sm mb-4">&larr; λ©”λ‰΄λ΅</button>
               <h2 class="text-2xl font-bold text-slate-800 border-b pb-4 mb-6">μμ—… μμƒ κ΄€λ¦¬ (ν„κ°•λ°)</h2>
               
               <div class="space-y-4 max-w-lg mx-auto">
                   <div class="grid grid-cols-1 gap-4 mb-6">
                       <div>
                           <label for="class-video-date" class="block text-sm font-medium text-slate-600 mb-1">μμ—… λ‚ μ§</label>
                           <input type="date" id="class-video-date" class="form-input">
                       </div>
                   </div>
                    
                    <div class="space-y-4 p-4 border rounded-lg bg-slate-50 mb-8">
                        <h3 class="text-lg font-semibold text-slate-700 mb-2">μƒ μμƒ λ“±λ΅</h3>
                        <div id="lecture-video-inputs-container-teacher">
                            <div class="flex gap-2 mb-2">
                                <input type="text" id="class-video-title" placeholder="μμƒ μ λ©" class="form-input text-sm flex-1">
                                <input type="text" id="class-video-url" placeholder="URL" class="form-input text-sm flex-1">
                            </div>
                        </div>

                        <div class="text-right flex gap-2 justify-end mt-4">
                           <button id="add-class-video-field-btn" class="btn-secondary text-sm">+ μ¶”κ°€</button>
                           <button id="save-class-video-btn" class="btn-primary text-sm">λ“±λ΅ν•κΈ°</button>
                        </div>
                   </div>

                   <div>
                        <h3 class="text-lg font-semibold text-slate-700 mb-2">μμƒ λ¦¬μ¤νΈ</h3>
                        <div id="class-video-list-container" class="space-y-3">
                            <p class="text-slate-400 text-sm">λ‚ μ§λ¥Ό μ„ νƒν•λ©΄ λ©λ΅μ΄ ν‘μ‹λ©λ‹λ‹¤.</p>
                        </div>
                   </div>
                </div>
            </div>

            <div id="view-report-mgmt" class="teacher-view" style="display:none;">
               <button class="back-to-teacher-menu btn btn-secondary btn-sm mb-4">&larr; λ©”λ‰΄λ΅</button>
               <h2 class="text-2xl font-bold text-slate-800 mb-4">μ‹ν— κ²°κ³Ό λ¦¬ν¬νΈ μ—…λ΅λ“</h2>
               <div class="space-y-4 max-w-lg mx-auto p-4 border rounded-lg bg-slate-50">
                   <div>
                       <label for="teacher-report-date" class="block text-sm font-medium text-slate-600 mb-1">μ‹ν— λ‚ μ§</label>
                       <input type="date" id="teacher-report-date" class="form-input">
                   </div>
                   <div>
                       <label for="teacher-report-files-input" class="block text-sm font-medium text-slate-600 mb-1">λ¦¬ν¬νΈ PDF νμΌ μ„ νƒ</label>
                       <input type="file" id="teacher-report-files-input" class="form-input" accept=".pdf" multiple>
                       <p class="text-xs text-slate-500 mt-1">νμΌ μ΄λ¦„μ€ '..._μ΄λ¦„_λ¦¬ν¬νΈ.pdf' ν•μ‹μ΄μ–΄μ•Ό ν•©λ‹λ‹¤.</p>
                       <p class="text-xs text-slate-500 mt-1">ν„μ¬ μ„ νƒλ λ°(<span id="teacher-report-current-class" class="font-semibold">-</span>) ν•™μƒλ“¤μ λ¦¬ν¬νΈλ§ μ—…λ΅λ“λ©λ‹λ‹¤.</p>
                   </div>
                   <div class="text-right">
                       <button id="teacher-upload-reports-btn" class="btn-primary">μ„ νƒν• νμΌ μ—…λ΅λ“</button>
                   </div>
                   <div id="teacher-report-upload-status" class="mt-4 text-sm"></div>
                   <div id="teacher-uploaded-reports-list" class="mt-6"></div>
               </div>
            </div>

          </main>
        </div>
      </div>
    </div>
  </div>

  <div id="teacher-assign-homework-modal" class="modal-backdrop" style="display:none;">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg">
         <header class="p-6 border-b flex justify-between items-center">
             <h2 id="teacher-homework-modal-title" class="text-2xl font-bold text-slate-800">μƒ μ™μ  μ¶μ </h2>
             <button id="teacher-close-homework-modal-btn" class="text-2xl font-light text-slate-500 hover:text-slate-800">&times;</button>
         </header>
         <main class="p-6 space-y-4">
             <div>
                 <label for="teacher-homework-title" class="block text-sm font-medium text-slate-700 mb-1">μ™μ  μ λ©</label>
                 <input type="text" id="teacher-homework-title" class="form-input" placeholder="μ: 1λ‹¨μ› λ¬Έμ ν’€μ΄ (p.10~15)">
             </div>
             <div>
                 <label for="teacher-homework-subject-select" class="block text-sm font-medium text-slate-700 mb-1">κ³Όλ© μ„ νƒ</label>
                 <select id="teacher-homework-subject-select" class="form-select"></select>
             </div>
             <div>
                 <label for="teacher-homework-textbook-select" class="block text-sm font-medium text-slate-700 mb-1">κµμ¬ μ„ νƒ</label>
                 <select id="teacher-homework-textbook-select" class="form-select" disabled></select>
             </div>
             <div>
                 <label for="teacher-homework-pages" class="block text-sm font-medium text-slate-700 mb-1">νμ΄μ§€/λ²”μ„</label>
                 <input type="text" id="teacher-homework-pages" class="form-input" placeholder="μ: p.10 ~ p.15">
             </div>
             <div>
                 <label for="teacher-homework-total-pages" class="block text-sm font-medium text-slate-700 mb-1">μ΄ μ μ¶ν•  νμ΄μ§€ μ (μ«μ)</label>
                 <input type="number" id="teacher-homework-total-pages" class="form-input" placeholder="μ: 5 (5μ¥ μ μ¶)">
             </div>
             <div>
                 <label for="teacher-homework-due-date" class="block text-sm font-medium text-slate-700 mb-1">μ μ¶ κΈ°ν•</label>
                 <input type="date" id="teacher-homework-due-date" class="form-input">
             </div>
         </main>
         <footer class="p-6 border-t flex justify-end gap-3">
             <button id="teacher-cancel-homework-btn" class="btn-secondary">μ·¨μ†</button>
             <button id="teacher-save-homework-btn" class="btn-primary">μ¶μ ν•κΈ°</button>
         </footer>
     </div>
  </div>

  <div id="teacher-new-lesson-modal" class="modal-backdrop" style="display:none;">
     <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col">
         <header class="p-6 border-b flex justify-between items-center">
             <h2 id="teacher-lesson-modal-title" class="text-2xl font-bold text-slate-800">μƒ ν•™μµ μ„ΈνΈ λ§λ“¤κΈ°</h2>
             <button id="teacher-close-modal-btn" class="text-2xl font-light text-slate-500 hover:text-slate-800">&times;</button>
         </header>
         <main class="p-6 flex-grow overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6">
             <div>
                 <h3 class="font-bold text-lg mb-4 text-slate-700">ν•™μµ μ •λ³΄</h3>
                 <div class="space-y-4">
                     <div>
                         <label for="teacher-lesson-title" class="block text-sm font-medium text-slate-600 mb-1">ν•™μµ μ λ©</label>
                         <input type="text" id="teacher-lesson-title" class="form-input">
                     </div>
                     <div>
                         <label for="teacher-video1-url" class="block text-sm font-medium text-slate-600 mb-1">μμƒ 1 URL (κΈ°λ³Έ μμƒ)</label>
                         <input type="url" id="teacher-video1-url" class="form-input" placeholder="https://youtube.com/watch?v=...">
                     </div>
                     <div>
                         <div class="flex items-center justify-between mb-1">
                             <label class="block text-sm font-medium text-slate-600">μμƒ 1 μμ •/λ³΄μ¶© μμƒ (μ„ νƒ)</label>
                             <button id="teacher-add-video1-rev-btn" class="btn-secondary btn-sm">+</button>
                         </div>
                         <div id="teacher-video1-rev-urls-container" class="space-y-2"></div>
                     </div>
                     
                     <div class="p-4 bg-slate-50 rounded-lg border border-slate-200 mt-2">
                         <label class="block text-sm font-medium text-slate-700 mb-2">μ‘μ© μμƒ (Video 2) - κµμ¬λ³„ λ“±λ΅</label>
                         <div class="text-xs text-slate-500 mb-3">ν•™μƒμ λ°μ— μ§€μ •λ κµμ¬ μμƒμ΄ μλ™μΌλ΅ ν‘μ‹λ©λ‹λ‹¤.</div>
                         
                         <div id="video2ListContainer" class="space-y-2"></div>
                         
                         <button type="button" id="btnAddVideo2Item" class="mt-2 text-sm text-blue-600 hover:text-blue-800 font-bold">
                             + μμƒ μ¶”κ°€ (κµμ¬λ…/URL)
                         </button>
                     </div>

                 </div>
             </div>
             <div>
                 <h3 class="font-bold text-lg mb-4 text-slate-700">ν€΄μ¦ μ •λ³΄ (JSON)</h3>
                 <div>
                     <label for="teacher-quiz-json-input" class="block text-sm font-medium text-slate-600 mb-1">λ¬Έμ μ€ν–‰ JSON λ¶™μ—¬λ„£κΈ°</label>
                     <textarea id="teacher-quiz-json-input" rows="8" class="form-input font-mono text-sm"></textarea>
                 </div>
                 <button id="teacher-preview-quiz-btn" class="btn-secondary w-full mt-2">λ―Έλ¦¬λ³΄κΈ°</button>
                 <div id="teacher-questions-preview-container" class="mt-4 p-4 border rounded-md bg-slate-50 hidden max-h-48 overflow-y-auto custom-scrollbar">
                     <h4 id="teacher-questions-preview-title" class="font-bold mb-2 text-slate-700">μƒμ„±λ ν€΄μ¦</h4>
                     <div id="teacher-questions-preview-list" class="text-sm space-y-1 text-slate-600"></div>
                 </div>
             </div>
         </main>
         <footer class="p-6 border-t flex justify-end gap-3">
             <button id="teacher-cancel-btn" class="btn-secondary">μ·¨μ†</button>
             <button id="teacher-save-lesson-btn" class="btn-primary flex items-center justify-center min-w-[120px]">
                 <span id="teacher-save-btn-text">μ €μ¥ν•κΈ°</span>
                 <div id="teacher-save-loader" class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin hidden"></div>
             </button>
         </footer>
     </div>
  </div>
  <div id="teacher-edit-class-modal" class="modal-backdrop" style="display:none;">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col">
        <header class="p-6 border-b flex items-center justify-between">
          <h2 class="text-2xl font-bold text-slate-800">
            λ° μ„¤μ • μμ •: <span id="teacher-edit-class-name">-</span>
          </h2>
          <button id="teacher-close-edit-class-modal-btn" class="text-2xl font-light text-slate-500 hover:text-slate-800">&times;</button>
        </header>

        <main class="p-6 flex-grow overflow-y-auto custom-scrollbar space-y-6">
          <section>
            <label for="teacher-edit-class-type" class="block text-sm font-medium text-slate-700 mb-2">λ° μ ν•</label>
            <select id="teacher-edit-class-type" class="form-select max-w-xs">
              <option value="self-directed">μκΈ°μ£Όλ„λ°</option>
              <option value="live-lecture">ν„κ°•λ°</option>
            </select>
          </section>

          <section>
            <h3 class="text-lg font-semibold text-slate-700 mb-3">κ³Όλ© λ° κµμ¬ μ„ νƒ</h3>
            <p class="text-sm text-slate-500 mb-2">κ³Όλ©μ„ μ²΄ν¬ν•λ©΄ ν•μ„μ— κµμ¬ λ©λ΅μ΄ ν‘μ‹λ©λ‹λ‹¤.</p>
            <div id="teacher-edit-class-subjects-and-textbooks" class="space-y-3"></div>
          </section>
        </main>

        <footer class="p-6 border-t flex gap-3 justify-end">
          <button id="teacher-cancel-edit-class-btn" class="btn-secondary">μ·¨μ†</button>
          <button id="teacher-save-class-edit-btn" class="btn-primary">μ €μ¥</button>
        </footer>
      </div>
  </div>
  <div id="teacher-subject-textbook-mgmt-modal" class="modal-backdrop" style="display:none;">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col">
        <header class="p-6 border-b flex justify-between items-center">
          <h2 class="text-2xl font-bold text-slate-800">κ³Όλ© λ° κµμ¬ κ΄€λ¦¬</h2>
          <button id="teacher-close-subject-textbook-modal-btn" class="text-2xl font-light text-slate-500 hover:text-slate-800">&times;</button>
        </header>
        <main class="p-6 flex-grow overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-8">
          <div>
            <h3 class="text-lg font-semibold text-slate-700 mb-4 border-b pb-2">κ³Όλ© κ΄€λ¦¬</h3>
            <div class="flex items-end gap-4 mb-4">
              <div class="flex-grow">
                <label for="teacher-new-subject-name" class="block text-sm font-medium text-slate-700 mb-1">μƒ κ³Όλ© μ΄λ¦„</label>
                <input type="text" id="teacher-new-subject-name" class="form-input form-input-sm" placeholder="μ: κ³µν†µ κ³Όν•™">
              </div>
              <div class="flex-shrink-0">
                <button id="teacher-add-subject-btn" class="btn-primary btn-sm">+ κ³Όλ© μ¶”κ°€</button>
              </div>
            </div>
            <h4 class="text-md font-semibold text-slate-600 mb-2">κ³Όλ© λ©λ΅</h4>
            <div id="teacher-subjects-list-mgmt" class="space-y-2 max-h-60 overflow-y-auto custom-scrollbar border p-2 rounded-md">
              <p class="text-sm text-slate-400">κ³Όλ© λ©λ΅ λ΅λ”© μ¤‘...</p>
            </div>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-slate-700 mb-4 border-b pb-2">κµμ¬ κ΄€λ¦¬</h3>
            <div class="mb-4">
              <label for="teacher-subject-select-for-textbook-mgmt" class="block text-sm font-medium text-slate-700 mb-1">κ³Όλ© μ„ νƒ</label>
              <select id="teacher-subject-select-for-textbook-mgmt" class="form-select form-select-sm"></select>
            </div>
            <div id="teacher-textbook-management-content" style="display:none;">
              <div class="flex items-end gap-4 mb-4">
                <div class="flex-grow">
                  <label for="teacher-new-textbook-name" class="block text-sm font-medium text-slate-700 mb-1">μƒ κµμ¬ μ΄λ¦„</label>
                  <input type="text" id="teacher-new-textbook-name" class="form-input form-input-sm" placeholder="μ: κ³Όν•™μ μ •μ„">
                </div>
                <div class="flex-shrink-0">
                  <button id="teacher-add-textbook-btn" class="btn-primary btn-sm">+ κµμ¬ μ¶”κ°€</button>
                </div>
              </div>
              <h4 class="text-md font-semibold text-slate-600 mb-2">κµμ¬ λ©λ΅</h4>
              <div id="teacher-textbooks-list-mgmt" class="space-y-2 max-h-60 overflow-y-auto custom-scrollbar border p-2 rounded-md">
                <p class="text-sm text-slate-400">κ³Όλ©μ„ μ„ νƒν•΄μ£Όμ„Έμ”.</p>
              </div>
            </div>
          </div>
        </main>
        <footer class="p-6 border-t flex justify-end">
          <button id="teacher-close-subject-textbook-modal-btn-footer" class="btn-secondary">λ‹«κΈ°</button>
        </footer>
      </div>
  </div>

  <div id="teacher-weekly-test-modal" class="modal-backdrop" style="display:none;">
    <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl">
        <h3 class="text-xl font-bold text-slate-800 mb-4">μ£Όκ°„ν…μ¤νΈ μ„±μ  λ“±λ΅</h3>
        <div class="space-y-4">
            <div>
                <label class="block text-xs font-bold text-slate-400 mb-1">ν•™μƒ μ„ νƒ</label>
                <select id="teacher-weekly-modal-student" class="w-full p-3 bg-slate-50 rounded-xl text-sm border-none outline-none bg-slate-50"></select>
            </div>
            <div>
                <label class="block text-xs font-bold text-slate-400 mb-1">λ‚ μ§ (κΈ/ν† /μΌ)</label>
                <input type="date" id="teacher-weekly-modal-date" class="w-full p-3 bg-slate-50 rounded-xl text-sm border-none outline-none">
            </div>
            <div>
                <label class="block text-xs font-bold text-slate-400 mb-1">μ μ</label>
                <input type="number" id="teacher-weekly-modal-score" placeholder="0~100" class="w-full p-3 bg-slate-50 rounded-xl text-sm border-none outline-none">
            </div>
            <div class="flex gap-2 mt-6">
                <button id="teacher-weekly-modal-close-btn" class="flex-1 py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200">μ·¨μ†</button>
                <button id="teacher-weekly-modal-save-btn" class="flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-700 shadow-md">μ €μ¥</button>
            </div>
        </div>
    </div>
  </div>

  <script type="module">
    import { TeacherApp } from '/src/teacher/teacherApp.js';
    if (TeacherApp?.init) {
      document.addEventListener('DOMContentLoaded', () => {
        TeacherApp.init();
      });
    } else {
      console.error('TeacherApp.init()κ°€ μ—†μµλ‹λ‹¤. teacherApp.js exportλ¥Ό ν™•μΈν•μ„Έμ”.');
    }
  </script>
</body>
</html>