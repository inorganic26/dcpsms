<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DCPSMS í•™ì› í¬í„¸</title>
  
  <script>
    (async function() {
      console.log("ğŸ§¹ [Portal V3] ì‚¼ì„± ì¸í„°ë„· ìºì‹œ í•´ê²° ëª¨ë“œ ì‘ë™...");
      try {
        if ('serviceWorker' in navigator) {
          const registrations = await navigator.serviceWorker.getRegistrations();
          for (const registration of registrations) await registration.unregister();
        }
        if ('caches' in window) {
          const keys = await caches.keys();
          for (const key of keys) await caches.delete(key);
        }
        
        const KEY = 'pwa_cleanup_done_v3_samsung_fix';
        if (!sessionStorage.getItem(KEY)) {
          sessionStorage.setItem(KEY, 'true');
          const newUrl = window.location.href.split('?')[0] + '?ver=' + new Date().getTime();
          console.log("âš¡ [Portal] ê°•ì œ ì£¼ì†Œ ì´ë™:", newUrl);
          window.location.replace(newUrl);
        }
      } catch (e) {
        console.error("âŒ ì˜¤ë¥˜ ë°œìƒ:", e);
      }
    })();
  </script>

  <script>
    (function() {
      const hostname = window.location.hostname;
      const timestamp = new Date().getTime(); 
      if (hostname.includes('admin')) {
        window.location.replace('/src/admin/index.html?t=' + timestamp);
      }
      else if (hostname.includes('st-dcprime') || hostname.includes('student')) {
        window.location.replace('/src/student/index.html?t=' + timestamp);
      }
      else if (hostname.includes('pa-dcprime') || hostname.includes('parent')) {
        window.location.replace('/src/parent/index.html?t=' + timestamp);
      }
      else if (hostname.includes('t-dcprime') || hostname.includes('teacher')) {
        window.location.replace('/src/teacher/index.html?t=' + timestamp);
      }
    })();
  </script>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
  <style> body { font-family: 'Noto Sans KR', sans-serif; } </style>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-4">

  <div class="bg-white p-8 rounded-3xl shadow-xl w-full max-w-4xl text-center">
    <h1 class="text-3xl font-bold text-slate-800 mb-2">DCPSMS í•™ì› í¬í„¸</h1>
    <p class="text-slate-500 mb-10">ì ‘ì†í•˜ì‹¤ ì„œë¹„ìŠ¤ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>

    <script type="module" src="/src/main.js?v=FIX_PWA_FINAL_V3"></script>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      <a href="/src/admin/index.html" class="block p-6 bg-indigo-50 rounded-2xl">ê´€ë¦¬ì</a>
      <a href="/src/teacher/index.html" class="block p-6 bg-purple-50 rounded-2xl">ì„ ìƒë‹˜</a>
      <a href="/src/student/index.html" class="block p-6 bg-blue-50 rounded-2xl">í•™ìƒ</a>
      <a href="/src/parent/index.html" class="block p-6 bg-green-50 rounded-2xl">í•™ë¶€ëª¨</a>
    </div>
  </div>

</body>
</html>