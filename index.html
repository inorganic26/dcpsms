<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>í•™ìŠµ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .view { display: none; }
        .active-view { display: block; }
        .admin-section-view { display: none; }
        .portal-card { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .portal-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #3b82f6; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .modal-backdrop { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center; z-index: 50; }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #64748b; }
        .option-btn { transition: all 0.2s ease-in-out; }
        .option-btn.correct { background-color: #22c55e; color: white; border-color: #16a34a; }
        .option-btn.incorrect { background-color: #ef4444; color: white; border-color: #dc2626; }
        .disabled { pointer-events: none; opacity: 0.8; }
        .subject-option { cursor: pointer; padding: 8px 12px; border-radius: 6px; border: 1px solid #e2e8f0; transition: all 0.2s ease; }
        .subject-option.selected { background-color: #3b82f6; color: white; border-color: #2563eb; }
        .student-screen { display: none; width: 100%; min-height: 100vh; flex-direction: column; }
        .lesson-card.dragging { opacity: 0.5; background: #e0f2fe; }
        .drag-handle { cursor: grab; }
        .drag-handle:active { cursor: grabbing; }
    </style>
</head>
<body class="bg-slate-100">

    <div id="toast-notification" style="transition: opacity 0.3s, transform 0.3s;" class="fixed top-8 right-8 z-[100] p-4 rounded-lg shadow-lg text-white transform translate-x-[120%] opacity-0">
        <p id="toast-message"></p>
    </div>

    <div id="portal-view" class="view">
        <div class="w-full min-h-screen flex items-center justify-center p-4">
            <div class="w-full max-w-4xl mx-auto">
                <header class="text-center mb-10">
                    <h1 class="text-4xl font-bold text-slate-800">í•™ìŠµ ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
                    <p class="text-slate-500 mt-2">ì‚¬ìš©í•˜ì‹¤ ì•±ì„ ì„ íƒí•˜ì„¸ìš”.</p>
                </header>
                <main class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div id="goto-admin-btn" class="portal-card cursor-pointer bg-white p-8 rounded-2xl shadow-lg text-center flex flex-col items-center">
                        <div class="bg-red-100 p-4 rounded-full mb-4"><svg class="w-8 h-8 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-1.007 1.11-1.226l.554-.221a2.25 2.25 0 012.387 2.387l-.221.554c-.219.55-.684 1.02-1.226 1.11l-3.031.606a2.25 2.25 0 00-1.288 1.288l-.606 3.031c-.09.542-.56 1.007-1.11 1.226l-.554.221a2.25 2.25 0 01-2.387-2.387l.221-.554c.219-.55.684-1.02 1.226-1.11l3.031-.606a2.25 2.25 0 001.288-1.288l.606-3.031z" /><path stroke-linecap="round" stroke-linejoin="round" d="M12.75 21a9.75 9.75 0 100-19.5 9.75 9.75 0 000 19.5z" /></svg></div>
                        <h2 class="text-xl font-bold text-slate-800">ê´€ë¦¬ì ì•±</h2>
                        <p class="text-slate-500 mt-2 text-sm">ë°˜, ê³¼ëª©, í•™ìƒ, í•™ìŠµì„<br>ì „ì²´ì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.</p>
                    </div>
                    <div id="goto-teacher-btn" class="portal-card cursor-pointer bg-white p-8 rounded-2xl shadow-lg text-center flex flex-col items-center">
                        <div class="bg-green-100 p-4 rounded-full mb-4"><svg class="w-8 h-8 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /></svg></div>
                        <h2 class="text-xl font-bold text-slate-800">ì„ ìƒë‹˜ ì•±</h2>
                        <p class="text-slate-500 mt-2 text-sm">í•™ìƒë“¤ì˜ í•™ìŠµ í˜„í™©ì„<br>ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤.</p>
                    </div>
                    <div id="goto-student-btn" class="portal-card cursor-pointer bg-white p-8 rounded-2xl shadow-lg text-center flex flex-col items-center">
                        <div class="bg-blue-100 p-4 rounded-full mb-4"><svg class="w-8 h-8 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" /></svg></div>
                        <h2 class="text-xl font-bold text-slate-800">í•™ìƒ ì•±</h2>
                        <p class="text-slate-500 mt-2 text-sm">ë¡œê·¸ì¸í•˜ì—¬ í•™ìŠµì„<br>ì‹œì‘í•©ë‹ˆë‹¤.</p>
                    </div>
                </main>
                <footer class="text-center mt-12 pt-4 border-t">
                    <p class="text-xs text-slate-400">Classroom ID: <span id="portal-session-id" class="font-mono"></span></p>
                    <button id="reset-session-btn" class="text-xs text-blue-500 hover:underline mt-1">ì‚¬ìš©ì ì´ˆê¸°í™”</button>
                </footer>
            </div>
        </div>
    </div>

    <div id="admin-view" class="view">
        <div class="container mx-auto max-w-5xl p-4 sm:p-6 md:p-8">
            <div id="admin-dashboard-view">
                <button class="back-to-portal-btn mb-6 bg-slate-200 text-slate-800 font-semibold px-4 py-2 rounded-lg hover:bg-slate-300 transition">&larr; í¬í„¸ë¡œ ëŒì•„ê°€ê¸°</button>
                <header class="text-center mb-10">
                    <h1 class="text-3xl font-bold text-slate-800">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
                    <p class="text-slate-500 mt-2">ê´€ë¦¬í•  í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”.</p>
                </header>
                <main class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div id="goto-subject-mgmt-btn" class="portal-card cursor-pointer bg-white p-6 rounded-xl shadow-md text-center">
                        <h2 class="text-lg font-bold text-slate-800">ê³¼ëª© ê´€ë¦¬</h2>
                    </div>
                    <div id="goto-textbook-mgmt-btn" class="portal-card cursor-pointer bg-white p-6 rounded-xl shadow-md text-center">
                        <h2 class="text-lg font-bold text-slate-800">êµì¬ ê´€ë¦¬</h2>
                    </div>
                    <div id="goto-class-mgmt-btn" class="portal-card cursor-pointer bg-white p-6 rounded-xl shadow-md text-center">
                        <h2 class="text-lg font-bold text-slate-800">ë°˜ ê´€ë¦¬</h2>
                    </div>
                    <div id="goto-student-mgmt-btn" class="portal-card cursor-pointer bg-white p-6 rounded-xl shadow-md text-center">
                        <h2 class="text-lg font-bold text-slate-800">í•™ìƒ ëª…ë‹¨ ê´€ë¦¬</h2>
                    </div>
                    <div id="goto-lesson-mgmt-btn" class="portal-card cursor-pointer bg-white p-6 rounded-xl shadow-md text-center">
                        <h2 class="text-lg font-bold text-slate-800">í•™ìŠµ ì„¸íŠ¸ ê´€ë¦¬</h2>
                    </div>
                </main>
            </div>
            <div id="admin-subject-mgmt-view" class="admin-section-view">
                <button class="back-to-admin-dashboard-btn mb-6 bg-slate-200 text-slate-800 font-semibold px-4 py-2 rounded-lg hover:bg-slate-300 transition">&larr; ê´€ë¦¬ì ë©”ë‰´ë¡œ</button>
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-bold text-slate-800 border-b pb-4 mb-6">ê³¼ëª© ê´€ë¦¬ (ê³µí†µ)</h2>
                    <div class="flex items-start gap-4"><div class="flex-grow"><label for="admin-new-subject-name" class="block text-sm font-medium text-slate-700 mb-2">ìƒˆ ê³¼ëª© ì´ë¦„</label><input type="text" id="admin-new-subject-name" class="w-full px-4 py-2 border border-slate-300 rounded-lg" placeholder="ì˜ˆ: ê³µí†µ ìˆ˜í•™"></div><div class="flex-shrink-0 pt-7"><button id="admin-add-subject-btn" class="bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700 transition">+ ê³¼ëª© ì¶”ê°€</button></div></div>
                    <div class="mt-6"><h3 class="text-lg font-semibold text-slate-700 mb-2">ìƒì„±ëœ ê³¼ëª© ëª©ë¡</h3><div id="admin-subjects-list" class="space-y-2"></div></div>
                </div>
            </div>
            <div id="admin-textbook-mgmt-view" class="admin-section-view">
                <button class="back-to-admin-dashboard-btn mb-6 bg-slate-200 text-slate-800 font-semibold px-4 py-2 rounded-lg hover:bg-slate-300 transition">&larr; ê´€ë¦¬ì ë©”ë‰´ë¡œ</button>
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-bold text-slate-800 border-b pb-4 mb-6">êµì¬ ê´€ë¦¬</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <label for="admin-subject-select-for-textbook" class="block text-sm font-medium text-slate-700 mb-2">êµì¬ë¥¼ ì¶”ê°€í•  ê³¼ëª© ì„ íƒ</label>
                            <select id="admin-subject-select-for-textbook" class="w-full p-2 border border-slate-300 rounded-lg"></select>
                            <div id="admin-textbook-management-content" class="mt-4" style="display: none;">
                                <div class="flex items-start gap-4">
                                    <div class="flex-grow"><label for="admin-new-textbook-name" class="block text-sm font-medium text-slate-700 mb-2">ìƒˆ êµì¬ ì´ë¦„</label><input type="text" id="admin-new-textbook-name" class="w-full px-4 py-2 border border-slate-300 rounded-lg" placeholder="ì˜ˆ: ìˆ˜í•™ì˜ ì •ì„"></div>
                                    <div class="flex-shrink-0 pt-7"><button id="admin-add-textbook-btn" class="bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700 transition">+ êµì¬ ì¶”ê°€</button></div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-slate-700 mb-2">ë“±ë¡ëœ êµì¬ ëª©ë¡</h3>
                            <div id="admin-textbooks-list" class="space-y-2"><p class="text-sm text-slate-400">ë¨¼ì € ê³¼ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="admin-class-mgmt-view" class="admin-section-view">
                <button class="back-to-admin-dashboard-btn mb-6 bg-slate-200 text-slate-800 font-semibold px-4 py-2 rounded-lg hover:bg-slate-300 transition">&larr; ê´€ë¦¬ì ë©”ë‰´ë¡œ</button>
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-bold text-slate-800 border-b pb-4 mb-6">ë°˜ ê´€ë¦¬</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <div class="flex items-start gap-4"><div class="flex-grow"><label for="admin-new-class-name" class="block text-sm font-medium text-slate-700 mb-2">ìƒˆ ë°˜ ì´ë¦„</label><input type="text" id="admin-new-class-name" class="w-full px-4 py-2 border border-slate-300 rounded-lg" placeholder="ì˜ˆ: 1í•™ë…„ 1ë°˜"></div><div class="flex-shrink-0 pt-7"><button id="admin-add-class-btn" class="bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700 transition">+ ë°˜ ì¶”ê°€</button></div></div>
                            <div class="mt-4">
                                <label class="block text-sm font-medium text-slate-700 mb-2">ì´ ë°˜ì— ì—°ê²°í•  ê³¼ëª© ì„ íƒ</label>
                                <div id="admin-class-subjects-options" class="space-y-2 p-2 border rounded-lg max-h-48 overflow-y-auto"><p class="text-slate-400">ë¨¼ì € ê³µí†µ ê³¼ëª©ì„ ìƒì„±í•´ì£¼ì„¸ìš”.</p></div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-slate-700 mb-2">ìƒì„±ëœ ë°˜ ëª©ë¡</h3><div id="admin-classes-list" class="space-y-2"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="admin-student-mgmt-view" class="admin-section-view">
                <button class="back-to-admin-dashboard-btn mb-6 bg-slate-200 text-slate-800 font-semibold px-4 py-2 rounded-lg hover:bg-slate-300 transition">&larr; ê´€ë¦¬ì ë©”ë‰´ë¡œ</button>
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-bold text-slate-800 border-b pb-4 mb-6">í•™ìƒ ëª…ë‹¨ ê´€ë¦¬</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <label for="admin-class-select-for-student" class="block text-sm font-medium text-slate-700 mb-2">í•™ìƒì„ ì¶”ê°€í•  ë°˜ ì„ íƒ</label><select id="admin-class-select-for-student" class="w-full p-2 border border-slate-300 rounded-lg"></select>
                            <div class="grid grid-cols-2 gap-4 mt-4">
                                <div><label for="admin-new-student-name" class="block text-sm font-medium text-slate-700 mb-2">ìƒˆ í•™ìƒ ì´ë¦„</label><input type="text" id="admin-new-student-name" class="w-full px-4 py-2 border border-slate-300 rounded-lg" placeholder="ì˜ˆ: í™ê¸¸ë™"></div>
                                <div><label for="admin-new-student-phone" class="block text-sm font-medium text-slate-700 mb-2">ì „í™”ë²ˆí˜¸</label><input type="tel" id="admin-new-student-phone" class="w-full px-4 py-2 border border-slate-300 rounded-lg" placeholder="ë¹„ë°€ë²ˆí˜¸ëŠ” ë’· 4ìë¦¬"></div>
                            </div>
                            <div class="flex justify-end mt-4"><button id="admin-add-student-btn" class="bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700 transition">+ í•™ìƒ ì¶”ê°€</button></div>
                        </div>
                        <div><h3 class="text-lg font-semibold text-slate-700 mb-2">ë“±ë¡ëœ í•™ìƒ ëª©ë¡</h3><div id="admin-students-list" class="space-y-2"><p class="text-sm text-slate-400">ë¨¼ì € ë°˜ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p></div></div>
                    </div>
                </div>
            </div>
            <div id="admin-lesson-mgmt-view" class="admin-section-view">
                <button class="back-to-admin-dashboard-btn mb-6 bg-slate-200 text-slate-800 font-semibold px-4 py-2 rounded-lg hover:bg-slate-300 transition">&larr; ê´€ë¦¬ì ë©”ë‰´ë¡œ</button>
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg">
                    <div class="border-b pb-4 mb-6">
                        <h1 class="text-2xl font-bold text-slate-800">í•™ìŠµ ì„¸íŠ¸ ê´€ë¦¬</h1>
                        <div class="w-full md:w-1/2">
                            <label for="admin-subject-select-for-lesson" class="block text-sm font-medium text-slate-700 mb-2">ê³¼ëª© ì„ íƒ</label>
                            <select id="admin-subject-select-for-lesson" class="w-full p-2 border border-slate-300 rounded-lg"></select>
                        </div>
                    </div>
                    <div id="admin-lessons-management-content" class="hidden">
                        <div class="flex justify-end gap-2">
                            <button id="admin-save-lesson-order-btn" class="bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700 transition duration-300 shadow-md">ìˆœì„œ ì €ì¥</button>
                            <button id="admin-show-new-lesson-modal-btn" class="bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700 transition duration-300 shadow-md">+ ìƒˆ í•™ìŠµ ì„¸íŠ¸ ë§Œë“¤ê¸°</button>
                        </div>
                        <div id="admin-lessons-list-container" class="mt-6"><div id="admin-lessons-list" class="space-y-4"></div></div>
                    </div>
                     <p id="admin-lesson-prompt" class="text-center text-slate-500 py-8">ë¨¼ì € ê³¼ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
                </div>
            </div>
        </div>
        <div id="admin-new-lesson-modal" class="modal-backdrop" style="display: none;">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col">
                <header class="p-6 border-b flex justify-between items-center"><h2 id="admin-lesson-modal-title" class="text-2xl font-bold text-slate-800">ìƒˆ í•™ìŠµ ì„¸íŠ¸ ë§Œë“¤ê¸°</h2><button id="admin-close-modal-btn" class="text-slate-500 hover:text-slate-800">&times;</button></header>
                <main class="p-6 flex-grow overflow-y-auto custom-scrollbar grid grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-bold text-lg mb-4 text-slate-700">í•™ìŠµ ì •ë³´</h3>
                        <div class="space-y-4">
                            <div><label for="admin-lesson-title" class="block text-sm font-medium text-slate-600 mb-1">í•™ìŠµ ì œëª©</label><input type="text" id="admin-lesson-title" class="w-full p-2 border rounded-md"></div>
                            <div><label for="admin-video1-url" class="block text-sm font-medium text-slate-600 mb-1">ì˜ìƒ 1 URL (ê¸°ë³¸ ì˜ìƒ)</label><input type="url" id="admin-video1-url" class="w-full p-2 border rounded-md"></div>
                            <div><label for="admin-video2-url" class="block text-sm font-medium text-slate-600 mb-1">ì˜ìƒ 2 URL (ë¬¸ì œ í’€ì´ ì˜ìƒ)</label><input type="url" id="admin-video2-url" class="w-full p-2 border rounded-md"></div>
                        </div>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg mb-4 text-slate-700">í€´ì¦ˆ ì •ë³´ (JSON)</h3>
                        <div><label for="admin-quiz-json-input" class="block text-sm font-medium text-slate-600 mb-1">ë¬¸ì œì€í–‰ JSON ë¶™ì—¬ë„£ê¸°</label><textarea id="admin-quiz-json-input" rows="8" class="w-full p-2 border rounded-md font-mono text-sm"></textarea></div>
                        <button id="admin-preview-quiz-btn" class="mt-2 w-full bg-slate-200 hover:bg-slate-300 text-slate-800 font-semibold py-2 px-4 rounded-md transition">ë¯¸ë¦¬ë³´ê¸°</button>
                        <div id="admin-questions-preview-container" class="mt-4 p-4 border rounded-md bg-slate-50 hidden max-h-48 overflow-y-auto custom-scrollbar">
                            <h4 id="admin-questions-preview-title" class="font-bold mb-2 text-slate-700">ìƒì„±ëœ í€´ì¦ˆ</h4>
                            <div id="admin-questions-preview-list" class="text-sm space-y-1 text-slate-600"></div>
                        </div>
                    </div>
                </main>
                <footer class="p-6 border-t flex justify-end gap-3">
                    <button id="admin-cancel-btn" class="bg-slate-100 hover:bg-slate-200 text-slate-800 font-semibold py-2 px-5 rounded-lg">ì·¨ì†Œ</button>
                    <button id="admin-save-lesson-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-5 rounded-lg flex items-center justify-center min-w-[100px]"><span id="admin-save-btn-text">ì €ì¥í•˜ê¸°</span><div id="admin-save-loader" class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin hidden"></div></button>
                </footer>
            </div>
        </div>
        <div id="admin-edit-class-modal" class="modal-backdrop" style="display: none;">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col">
                <header class="p-6 border-b flex justify-between items-center"><h2 class="text-2xl font-bold text-slate-800">ë°˜ ì •ë³´ ìˆ˜ì •</h2><button id="admin-close-edit-class-modal-btn" class="text-slate-500 hover:text-slate-800">&times;</button></header>
                <main class="p-6 flex-grow overflow-y-auto custom-scrollbar">
                    <p class="mb-1 text-sm font-medium text-slate-600">ë°˜ ì´ë¦„</p>
                    <p id="admin-edit-class-name" class="text-lg font-bold text-slate-800 mb-6"></p>
                    <p class="mb-2 text-sm font-medium text-slate-600">ì´ ë°˜ì—ì„œ ì‚¬ìš©í•  ê³¼ëª© ë° êµì¬ ì„ íƒ</p>
                    <div id="admin-edit-class-subjects-and-textbooks" class="space-y-4"></div>
                </main>
                <footer class="p-6 border-t flex justify-end gap-3">
                    <button id="admin-cancel-edit-class-btn" class="bg-slate-100 hover:bg-slate-200 text-slate-800 font-semibold py-2 px-5 rounded-lg">ì·¨ì†Œ</button>
                    <button id="admin-save-class-edit-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-5 rounded-lg">ë³€ê²½ì‚¬í•­ ì €ì¥</button>
                </footer>
            </div>
        </div>
    </div>

    <div id="teacher-view" class="view">
        <div class="container mx-auto max-w-6xl p-4 sm:p-6 md:p-8">
            <button class="back-to-portal-btn mb-6 bg-slate-200 text-slate-800 font-semibold px-4 py-2 rounded-lg hover:bg-slate-300 transition">&larr; í¬í„¸ë¡œ ëŒì•„ê°€ê¸°</button>
            <div id="teacher-loading-screen" class="w-full py-20 flex justify-center items-center" style="display: none;"><div class="loader"></div></div>
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg">
                <header class="flex flex-col md:flex-row gap-4 border-b pb-6 mb-6">
                    <div class="flex-1"><label for="teacher-class-select" class="block text-sm font-medium text-slate-700 mb-2">ë°˜ ì„ íƒ</label><select id="teacher-class-select" class="w-full p-2 border border-slate-300 rounded-lg"></select></div>
                    <div class="flex-1"><label for="teacher-view-select" class="block text-sm font-medium text-slate-700 mb-2">í™•ì¸í•  ë‚´ìš©</label><select id="teacher-view-select" class="w-full p-2 border border-slate-300 rounded-lg" disabled><option value="lessons">í•™ìŠµ í˜„í™©</option><option value="homework">ìˆ™ì œ í˜„í™©</option></select></div>
                </header>

                <main>
                    <div id="teacher-lessons-dashboard" style="display: none;">
                        <div class="flex flex-col md:flex-row gap-4 mb-6">
                            <div class="flex-1"><label for="teacher-subject-select" class="block text-sm font-medium text-slate-700 mb-2">ê³¼ëª© ì„ íƒ</label><select id="teacher-subject-select" class="w-full p-2 border border-slate-300 rounded-lg" disabled></select></div>
                            <div class="flex-1"><label for="teacher-lesson-select" class="block text-sm font-medium text-slate-700 mb-2">í•™ìŠµ ì„ íƒ</label><select id="teacher-lesson-select" class="w-full p-2 border border-slate-300 rounded-lg" disabled></select></div>
                        </div>
                        <div id="teacher-dashboard-content" class="overflow-x-auto" style="display: none;">
                             <h2 id="teacher-selected-lesson-title" class="text-xl font-bold text-slate-800 mb-4"></h2>
                             <table class="w-full text-sm text-left text-gray-500"><tbody id="teacher-results-table-body"></tbody></table>
                        </div>
                    </div>

                    <div id="teacher-homework-dashboard" style="display: none;">
                        <div class="flex justify-between items-center mb-6">
                            <div class="flex-1 max-w-md"><label for="teacher-homework-select" class="block text-sm font-medium text-slate-700 mb-2">ìˆ™ì œ ì„ íƒ</label><select id="teacher-homework-select" class="w-full p-2 border border-slate-300 rounded-lg"></select></div>
                            <div id="teacher-assign-homework-btn-container" style="display: none;"><button id="teacher-assign-homework-btn" class="bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700 transition">+ ìƒˆ ìˆ™ì œ ì¶œì œ</button></div>
                        </div>
                        <div id="teacher-homework-content" class="overflow-x-auto" style="display: none;">
                            <div class="flex justify-between items-center mb-4">
                                <h2 id="teacher-selected-homework-title" class="text-xl font-bold text-slate-800"></h2>
                                <div id="teacher-homework-management-buttons" class="flex gap-2" style="display: none;">
                                    <button id="teacher-edit-homework-btn" class="text-sm bg-yellow-500 text-white font-semibold px-3 py-1 rounded-lg">ìˆ˜ì •</button>
                                    <button id="teacher-delete-homework-btn" class="text-sm bg-red-500 text-white font-semibold px-3 py-1 rounded-lg">ì‚­ì œ</button>
                                </div>
                            </div>
                            <table class="w-full text-sm text-left text-gray-500"><tbody id="teacher-homework-table-body"></tbody></table>
                        </div>
                    </div>
                </main>
            </div>
        </div>

        <div id="teacher-assign-homework-modal" class="modal-backdrop" style="display: none;">
             <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md">
                <header class="p-6 border-b flex justify-between items-center"><h2 id="teacher-homework-modal-title" class="text-xl font-bold text-slate-800">ìƒˆ ìˆ™ì œ ì¶œì œ</h2><button id="teacher-close-homework-modal-btn" class="text-slate-500 hover:text-slate-800">&times;</button></header>
                <main class="p-6 space-y-4">
                    <div><label for="teacher-homework-subject-select" class="block text-sm font-medium text-slate-600 mb-1">ê³¼ëª©</label><select id="teacher-homework-subject-select" class="w-full p-2 border rounded-md"></select></div>
                    <div><label for="teacher-homework-textbook-select" class="block text-sm font-medium text-slate-600 mb-1">êµì¬</label><select id="teacher-homework-textbook-select" class="w-full p-2 border rounded-md" disabled></select></div>
                    <div><label for="teacher-homework-due-date" class="block text-sm font-medium text-slate-600 mb-1">ì œì¶œ ê¸°í•œ</label><input type="date" id="teacher-homework-due-date" class="w-full p-2 border rounded-md"></div>
                </main>
                <footer class="p-6 border-t flex justify-end gap-3">
                    <button id="teacher-cancel-homework-btn" class="bg-slate-100 hover:bg-slate-200 text-slate-800 font-semibold py-2 px-5 rounded-lg">ì·¨ì†Œ</button>
                    <button id="teacher-save-homework-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-5 rounded-lg">ì¶œì œí•˜ê¸°</button>
                </footer>
            </div>
        </div>
    </div>

    <div id="student-view" class="view">
        <div id="student-loading-screen" class="student-screen items-center justify-center"><div class="loader"></div></div>

        <div id="student-login-screen" class="student-screen items-center justify-center">
            <div class="w-full max-w-sm mx-auto">
                <div class="bg-white p-8 rounded-2xl shadow-lg text-center">
                    <h1 class="text-2xl font-bold text-slate-800 mb-6">í•™ìƒ ë¡œê·¸ì¸</h1>
                    <div class="space-y-4 text-left">
                        <div><label for="student-class-select" class="block text-sm font-medium text-slate-700 mb-1">ë°˜</label><select id="student-class-select" class="w-full p-2 border border-slate-300 rounded-lg"></select></div>
                        <div><label for="student-name-select" class="block text-sm font-medium text-slate-700 mb-1">ì´ë¦„</label><select id="student-name-select" class="w-full p-2 border border-slate-300 rounded-lg" disabled></select></div>
                        <div><label for="student-password" class="block text-sm font-medium text-slate-700 mb-1">ë¹„ë°€ë²ˆí˜¸</label><input type="password" id="student-password" class="w-full p-2 border border-slate-300 rounded-lg" placeholder="ì „í™”ë²ˆí˜¸ ë’· 4ìë¦¬" disabled></div>
                    </div>
                    <button id="student-login-btn" class="mt-6 w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition disabled:opacity-50" disabled>ë¡œê·¸ì¸</button>
                    <button class="back-to-portal-btn mt-4 text-sm text-slate-500 hover:underline">í¬í„¸ë¡œ ëŒì•„ê°€ê¸°</button>
                </div>
            </div>
        </div>

        <div id="student-subject-selection-screen" class="student-screen items-center justify-center">
            <div class="w-full max-w-md mx-auto p-4">
                <header class="text-center mb-8"><h1 id="student-welcome-message" class="text-3xl font-bold text-slate-800"></h1><p class="text-slate-500 mt-2">í•™ìŠµí•  ê³¼ëª©ì„ ì„ íƒí•˜ì„¸ìš”.</p></header>
                <main class="space-y-4">
                    <div id="student-subjects-list" class="space-y-3"></div>
                    <button id="student-goto-homework-btn" class="w-full p-4 text-lg font-semibold text-white bg-slate-700 rounded-lg hover:bg-slate-800 transition">ìˆ™ì œ ì œì¶œ</button>
                </main>
            </div>
        </div>

        <div id="student-lesson-selection-screen" class="student-screen items-center justify-center">
            <div class="w-full max-w-md mx-auto p-4">
                <button id="student-back-to-subjects-btn" class="mb-6 text-sm text-slate-500 hover:underline">&larr; ê³¼ëª© ì„ íƒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
                <header class="text-center mb-8"><h1 id="student-selected-subject-title" class="text-3xl font-bold text-slate-800"></h1><p class="text-slate-500 mt-2">ì§„í–‰í•  í•™ìŠµì„ ì„ íƒí•˜ì„¸ìš”.</p></header>
                <main id="student-lessons-list" class="space-y-3"></main>
                <div id="student-no-lesson-screen" class="text-center py-10" style="display: none;">
                    <p class="text-slate-500">í˜„ì¬ ì§„í–‰ ê°€ëŠ¥í•œ í•™ìŠµì´ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>
        
        <div id="student-homework-screen" class="student-screen items-center justify-center">
            <div class="w-full max-w-lg mx-auto p-4">
                 <button id="student-back-to-subjects-from-homework-btn" class="mb-6 text-sm text-slate-500 hover:underline">&larr; ê³¼ëª© ì„ íƒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
                <header class="text-center mb-8"><h1 class="text-3xl font-bold text-slate-800">ìˆ™ì œ ëª©ë¡</h1><p class="text-slate-500 mt-2">ì œì¶œí•  ìˆ™ì œë¥¼ ì„ íƒí•˜ì„¸ìš”.</p></header>
                <main id="student-homework-list" class="space-y-3"></main>
            </div>
        </div>

        <div id="student-video1-screen" class="student-screen items-center justify-center">
            <div class="w-full max-w-4xl mx-auto p-4">
                <button id="student-back-to-lessons-from-video-btn" class="mb-4 text-sm text-slate-500 hover:underline">&larr; í•™ìŠµ ì„ íƒìœ¼ë¡œ</button>
                <h1 id="student-video1-title" class="text-2xl font-bold text-slate-800 mb-4 text-center"></h1>
                <div class="aspect-w-16 aspect-h-9 mb-6"><iframe id="student-video1-iframe" class="w-full aspect-video rounded-lg shadow-lg" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>
                <button id="student-start-quiz-btn" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition">ê°œë… í™•ì¸ í€´ì¦ˆ í’€ê¸°</button>
            </div>
        </div>
        
        <div id="student-quiz-screen" class="student-screen items-center justify-center">
            <div class="w-full max-w-2xl mx-auto p-4">
                <div class="bg-white p-8 rounded-2xl shadow-lg">
                    <div class="flex justify-between items-center mb-4">
                        <p id="student-progress-text" class="text-sm font-semibold text-slate-600"></p>
                        <p id="student-score-text" class="text-sm font-semibold text-slate-600"></p>
                    </div>
                    <div class="w-full bg-slate-200 rounded-full h-2.5 mb-6"><div id="student-progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div></div>
                    <h2 id="student-question-text" class="text-xl font-bold text-slate-800 mb-6 min-h-[60px]"></h2>
                    <div id="student-options-container" class="space-y-3"></div>
                </div>
            </div>
        </div>

        <div id="student-result-screen" class="student-screen items-center justify-center p-4">
            <div id="student-success-message" class="w-full max-w-4xl text-center" style="display: none;">
                <h1 class="text-4xl font-bold text-green-600">ğŸ‰ í†µê³¼! ğŸ‰</h1>
                <p id="student-result-score-text-success" class="mt-2 text-slate-600"></p>
                <div class="mt-8">
                    <h2 class="text-xl font-bold text-slate-800 mb-4">ë¬¸ì œ í’€ì´ ì˜ìƒ</h2>
                    <div class="aspect-w-16 aspect-h-9 mb-6"><iframe id="student-review-video2-iframe" class="w-full aspect-video rounded-lg shadow-lg" frameborder="0" allowfullscreen></iframe></div>
                    <div class="flex gap-4 justify-center">
                        <button id="student-rewatch-video1-btn" class="bg-slate-200 text-slate-800 font-semibold py-2 px-5 rounded-lg hover:bg-slate-300">ê°œë… ì˜ìƒ ë‹¤ì‹œë³´ê¸°</button>
                        <button id="student-back-to-lessons-btn-success" class="bg-blue-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-blue-700">í•™ìŠµ ëª©ë¡ìœ¼ë¡œ</button>
                    </div>
                </div>
            </div>
            <div id="student-failure-message" class="w-full max-w-4xl text-center" style="display: none;">
                <h1 class="text-4xl font-bold text-red-600">ğŸ’¥ ë‹¤ì‹œ ë„ì „! ğŸ’¥</h1>
                <p id="student-result-score-text-failure" class="mt-2 text-slate-600"></p>
                 <div class="mt-8">
                    <h2 class="text-xl font-bold text-slate-800 mb-4">ë¬¸ì œ í’€ì´ ì˜ìƒ</h2>
                    <div class="aspect-w-16 aspect-h-9 mb-6"><iframe id="student-video2-iframe" class="w-full aspect-video rounded-lg shadow-lg" frameborder="0" allowfullscreen></iframe></div>
                    <button id="student-retry-quiz-btn" class="bg-yellow-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-yellow-600">í€´ì¦ˆ ë‹¤ì‹œ í’€ê¸°</button>
                </div>
            </div>
        </div>

        <div id="student-upload-modal" class="modal-backdrop" style="display: none;">
             <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col">
                <header class="p-6 border-b flex justify-between items-center">
                    <h2 id="student-upload-modal-title" class="text-xl font-bold text-slate-800"></h2>
                    <button id="student-close-upload-modal-btn" class="text-slate-500 hover:text-slate-800">&times;</button>
                </header>
                <main class="p-6 flex-grow overflow-y-auto custom-scrollbar">
                    <label for="student-homework-files-input" class="w-full border-2 border-dashed border-slate-300 rounded-lg flex flex-col justify-center items-center h-32 cursor-pointer hover:bg-slate-50">
                        <p class="text-slate-500">í´ë¦­í•˜ê±°ë‚˜ íŒŒì¼ì„ ì—¬ê¸°ë¡œ ë“œë˜ê·¸í•˜ì„¸ìš”</p>
                        <p class="text-sm text-slate-400">ì—¬ëŸ¬ ì¥ì˜ ì‚¬ì§„ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                    </label>
                    <input type="file" id="student-homework-files-input" class="hidden" multiple accept="image/*">
                    <div id="student-homework-preview-container" class="mt-4 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4"></div>
                </main>
                <footer class="p-6 border-t flex justify-end gap-3">
                    <button id="student-cancel-upload-btn" class="bg-slate-100 hover:bg-slate-200 text-slate-800 font-semibold py-2 px-5 rounded-lg">ì·¨ì†Œ</button>
                    <button id="student-upload-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-5 rounded-lg flex items-center justify-center min-w-[120px]">
                        <span id="student-upload-btn-text">ì—…ë¡œë“œí•˜ê¸°</span>
                        <div id="student-upload-loader" class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin hidden"></div>
                    </button>
                </footer>
            </div>
        </div>

    </div>
    
    <script type="module" src="/src/main.js"></script>
</body>
</html>